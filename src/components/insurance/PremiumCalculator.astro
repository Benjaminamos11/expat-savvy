---
---

<section class="py-16 bg-gradient-to-br from-red-50 to-pink-50">
  <div class="max-w-5xl mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">Calculate Your Exact 2026 Premium</h2>
      <p class="text-xl text-gray-600">Get personalized quotes in 30 seconds</p>
    </div>

    <div class="bg-white rounded-2xl shadow-[8px_8px_16px_#d9d9d9,-8px_-8px_16px_#ffffff] overflow-hidden">
      <div class="grid md:grid-cols-2 gap-0">
        <!-- Calculator Form -->
        <div class="p-8 bg-gradient-to-br from-gray-900 to-gray-800 text-white">
          <h3 class="text-2xl font-semibold mb-6">Your Details</h3>
          
          <form id="premium-calculator-form" class="space-y-6">
            <!-- Age Input -->
            <div>
              <label class="block text-sm font-medium mb-2">Your Age</label>
              <input 
                type="number" 
                id="calc-age" 
                min="18" 
                max="80" 
                value="39"
                class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:border-red-500"
                placeholder="e.g. 35"
              />
            </div>

            <!-- Canton Selection -->
            <div>
              <label class="block text-sm font-medium mb-2">Canton</label>
              <select 
                id="calc-canton"
                class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-red-500 appearance-none"
              >
                <option value="zurich">Zurich</option>
                <option value="geneva">Geneva</option>
                <option value="zug">Zug</option>
                <option value="basel">Basel</option>
                <option value="bern">Bern</option>
                <option value="vaud">Vaud</option>
                <option value="lucerne">Lucerne</option>
              </select>
            </div>

            <!-- Deductible Selection -->
            <div>
              <label class="block text-sm font-medium mb-2">Annual Deductible</label>
              <select 
                id="calc-deductible"
                class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-red-500 appearance-none"
              >
                <option value="300">CHF 300 (Higher premiums, lower costs)</option>
                <option value="500">CHF 500</option>
                <option value="1000">CHF 1000</option>
                <option value="1500">CHF 1500</option>
                <option value="2000">CHF 2000</option>
                <option value="2500" selected>CHF 2500 (Lower premiums, higher costs)</option>
              </select>
            </div>

            <!-- Model Selection -->
            <div>
              <label class="block text-sm font-medium mb-2">Insurance Model</label>
              <select 
                id="calc-model"
                class="w-full px-4 py-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-red-500 appearance-none"
              >
                <option value="standard">Standard (Any doctor)</option>
                <option value="hmo" selected>HMO (15-25% savings)</option>
                <option value="telmed">Telmed (20-30% savings)</option>
                <option value="familyDoctor">Family Doctor (15-20% savings)</option>
              </select>
            </div>

            <!-- Calculate Button -->
            <button 
              type="submit"
              class="w-full px-6 py-4 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-lg shadow-lg hover:shadow-xl transition-all"
            >
              Calculate My Premium
            </button>
          </form>
        </div>

        <!-- Results Panel -->
        <div class="p-8 bg-gray-50">
          <div id="calculator-results" class="hidden">
            <h3 class="text-2xl font-semibold mb-6 text-gray-900">Your Top 3 Options</h3>
            
            <!-- Result 1 -->
            <div class="mb-4 p-4 bg-white rounded-xl shadow-[2px_2px_4px_#d9d9d9,-1px_-1px_2px_#ffffff] border-l-4 border-red-500">
              <div class="flex items-center justify-between mb-2">
                <div class="font-semibold text-gray-900" id="result-1-name">CSS</div>
                <div class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded">Best Price</div>
              </div>
              <div class="flex items-baseline mb-2">
                <div class="text-3xl font-bold text-gray-900" id="result-1-price">CHF 326</div>
                <div class="text-sm text-gray-600 ml-2">/month</div>
              </div>
              <div class="text-sm text-gray-600 mb-3" id="result-1-model">HMO Model</div>
              <button 
                onclick="window.openOffersModal && window.openOffersModal('calc-result-1')"
                class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-sm transition-all"
              >
                Get This Quote
              </button>
            </div>

            <!-- Result 2 -->
            <div class="mb-4 p-4 bg-white rounded-xl shadow-[2px_2px_4px_#d9d9d9,-1px_-1px_2px_#ffffff]">
              <div class="flex items-center justify-between mb-2">
                <div class="font-semibold text-gray-900" id="result-2-name">Helsana</div>
                <div class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">Best Digital</div>
              </div>
              <div class="flex items-baseline mb-2">
                <div class="text-3xl font-bold text-gray-900" id="result-2-price">CHF 335</div>
                <div class="text-sm text-gray-600 ml-2">/month</div>
              </div>
              <div class="text-sm text-gray-600 mb-3" id="result-2-model">HMO Model</div>
              <button 
                onclick="window.openOffersModal && window.openOffersModal('calc-result-2')"
                class="w-full px-4 py-2 bg-white border-2 border-gray-300 hover:border-red-500 text-gray-700 rounded-lg font-semibold text-sm transition-all"
              >
                Get This Quote
              </button>
            </div>

            <!-- Result 3 -->
            <div class="mb-6 p-4 bg-white rounded-xl shadow-[2px_2px_4px_#d9d9d9,-1px_-1px_2px_#ffffff]">
              <div class="flex items-center justify-between mb-2">
                <div class="font-semibold text-gray-900" id="result-3-name">Swica</div>
                <div class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">Best Service</div>
              </div>
              <div class="flex items-baseline mb-2">
                <div class="text-3xl font-bold text-gray-900" id="result-3-price">CHF 338</div>
                <div class="text-sm text-gray-600 ml-2">/month</div>
              </div>
              <div class="text-sm text-gray-600 mb-3" id="result-3-model">HMO Model</div>
              <button 
                onclick="window.openOffersModal && window.openOffersModal('calc-result-3')"
                class="w-full px-4 py-2 bg-white border-2 border-gray-300 hover:border-red-500 text-gray-700 rounded-lg font-semibold text-sm transition-all"
              >
                Get This Quote
              </button>
            </div>

            <!-- Savings Summary -->
            <div class="p-4 bg-red-50 rounded-xl border-2 border-red-200">
              <div class="text-center">
                <div class="text-sm text-gray-700 mb-1">Annual savings vs average:</div>
                <div class="text-2xl font-bold text-red-600" id="savings-amount">CHF 2,100</div>
              </div>
            </div>

            <!-- Additional Actions -->
            <div class="mt-6 space-y-3">
              <button 
                onclick="window.openOffersModal && window.openOffersModal('calc-expert-help')"
                class="w-full px-4 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-lg font-semibold transition-all"
              >
                Talk to Expert About Results
              </button>
              <button 
                id="email-results-btn"
                class="w-full px-4 py-3 bg-white border-2 border-gray-300 hover:border-red-500 text-gray-700 rounded-lg font-semibold transition-all"
              >
                Email Me These Results
              </button>
            </div>
          </div>

          <!-- Initial State -->
          <div id="calculator-placeholder" class="text-center py-12">
            <div class="text-6xl mb-4">ðŸ§®</div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2">Ready to Calculate</h3>
            <p class="text-gray-600">Fill in your details on the left to see your personalized premiums</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Alternative CTA -->
    <div class="mt-8 text-center">
      <p class="text-gray-600 mb-4">Want more detailed calculations? Try our AI assistant:</p>
      <a 
        href="/ai-chat"
        class="inline-flex items-center px-8 py-4 bg-white border-2 border-gray-300 hover:border-red-500 text-gray-900 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all"
      >
        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
        </svg>
        Use Advanced AI Calculator
      </a>
    </div>
  </div>
</section>

<script>
  // Premium data (simplified - you should load from API/database)
  const premiumData = {
    zurich: {
      swica: { hmo: 338, standard: 418, telmed: 320, familyDoctor: 340 },
      helsana: { hmo: 335, standard: 420, telmed: 318, familyDoctor: 338 },
      css: { hmo: 326, standard: 410, telmed: 310, familyDoctor: 330 },
      sanitas: { hmo: 330, standard: 415, telmed: 315, familyDoctor: 335 }
    },
    geneva: {
      swica: { hmo: 463, standard: 580, telmed: 445, familyDoctor: 465 },
      helsana: { hmo: 446, standard: 560, telmed: 428, familyDoctor: 448 },
      css: { hmo: 442, standard: 555, telmed: 425, familyDoctor: 445 },
      sanitas: { hmo: 443, standard: 558, telmed: 426, familyDoctor: 446 }
    },
    zug: {
      swica: { hmo: 213, standard: 281, telmed: 200, familyDoctor: 215 },
      helsana: { hmo: 215, standard: 285, telmed: 202, familyDoctor: 218 },
      css: { hmo: 212, standard: 280, telmed: 198, familyDoctor: 214 },
      sanitas: { hmo: 205, standard: 270, telmed: 192, familyDoctor: 208 }
    },
    basel: {
      swica: { hmo: 428, standard: 553, telmed: 410, familyDoctor: 430 },
      helsana: { hmo: 416, standard: 540, telmed: 398, familyDoctor: 418 },
      css: { hmo: 411, standard: 535, telmed: 393, familyDoctor: 413 },
      sanitas: { hmo: 433, standard: 558, telmed: 415, familyDoctor: 435 }
    }
  };

  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('premium-calculator-form');
    const results = document.getElementById('calculator-results');
    const placeholder = document.getElementById('calculator-placeholder');

    form?.addEventListener('submit', (e) => {
      e.preventDefault();

      // Get form values
      const ageInput = document.getElementById('calc-age') as HTMLInputElement | null;
      const cantonSelect = document.getElementById('calc-canton') as HTMLSelectElement | null;
      const deductibleSelect = document.getElementById('calc-deductible') as HTMLSelectElement | null;
      const modelSelect = document.getElementById('calc-model') as HTMLSelectElement | null;

      if (!ageInput || !cantonSelect || !deductibleSelect || !modelSelect) return;

      const age = parseInt(ageInput.value);
      const canton = cantonSelect.value;
      const deductible = deductibleSelect.value;
      const model = modelSelect.value;

      // Get premium data for canton
      const cantonData = premiumData[canton as keyof typeof premiumData] || premiumData.zurich;
      
      // Calculate premiums
      const modelKey = model as keyof typeof cantonData.css;
      const results_data = [
        { name: 'CSS', price: cantonData.css[modelKey], badge: 'Best Price' },
        { name: 'Helsana', price: cantonData.helsana[modelKey], badge: 'Best Digital' },
        { name: 'Swica', price: cantonData.swica[modelKey], badge: 'Best Service' }
      ].sort((a, b) => a.price - b.price);

      // Update results
      const result1Name = document.getElementById('result-1-name');
      const result1Price = document.getElementById('result-1-price');
      const result1Model = document.getElementById('result-1-model');
      const result2Name = document.getElementById('result-2-name');
      const result2Price = document.getElementById('result-2-price');
      const result2Model = document.getElementById('result-2-model');
      const result3Name = document.getElementById('result-3-name');
      const result3Price = document.getElementById('result-3-price');
      const result3Model = document.getElementById('result-3-model');
      const savingsAmount = document.getElementById('savings-amount');

      const modelFormatted = model.replace(/([A-Z])/g, ' $1').trim().replace(/\b\w/g, (l: string) => l.toUpperCase()) + ' Model';

      if (result1Name) result1Name.textContent = results_data[0].name;
      if (result1Price) result1Price.textContent = `CHF ${results_data[0].price}`;
      if (result1Model) result1Model.textContent = modelFormatted;

      if (result2Name) result2Name.textContent = results_data[1].name;
      if (result2Price) result2Price.textContent = `CHF ${results_data[1].price}`;
      if (result2Model) result2Model.textContent = modelFormatted;

      if (result3Name) result3Name.textContent = results_data[2].name;
      if (result3Price) result3Price.textContent = `CHF ${results_data[2].price}`;
      if (result3Model) result3Model.textContent = modelFormatted;

      // Calculate savings (compared to average)
      const avgPrice = (results_data[0].price + results_data[1].price + results_data[2].price) / 3;
      const savings = Math.round((avgPrice - results_data[0].price) * 12);
      if (savingsAmount) savingsAmount.textContent = `CHF ${savings}`;

      // Show results
      if (placeholder) placeholder.classList.add('hidden');
      if (results) results.classList.remove('hidden');

      // Smooth scroll to results on mobile
      if (window.innerWidth < 768 && results) {
        results.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    });

    // Email results button
    document.getElementById('email-results-btn')?.addEventListener('click', () => {
      if ((window as any).openOffersModal) {
        (window as any).openOffersModal('calc-email-results');
      }
    });
  });
</script>

