---
import Layout from '../layouts/Layout.astro';
import ConsultationModal from '../components/consultation/ConsultationModal.astro';

const insuranceModels = [
  {
    name: "Standard Model",
    description: "Free choice of doctors throughout Switzerland",
    savings: "0%",
    bestFor: ["Maximum flexibility", "Direct specialist access", "No restrictions"]
  },
  {
    name: "Family Doctor",
    description: "Choose a designated family doctor as first point of contact",
    savings: "Up to 15%",
    bestFor: ["Coordinated care", "Lower premiums", "Personal relationship"]
  },
  {
    name: "HMO",
    description: "Use specific health centers as first point of contact",
    savings: "Up to 20%",
    bestFor: ["Significant savings", "Integrated care", "Urban areas"]
  },
  {
    name: "Telmed",
    description: "Call medical hotline before visiting doctor",
    savings: "Up to 15%",
    bestFor: ["Convenience", "Lower premiums", "Simple conditions"]
  }
];

const providers = [
  {
    name: "Assura",
    logo: "https://res.cloudinary.com/dphbnwjtx/image/upload/v1740406940/assura-logo-png_seeklogo-462524_zlvevx.png",
    link: "/healthcare/all-insurances/assura",
    description: "Known for competitive premiums"
  },
  {
    name: "CSS",
    logo: "https://res.cloudinary.com/dphbnwjtx/image/upload/v1740414664/css-logo_yvxvxr.png",
    link: "/healthcare/all-insurances/css",
    description: "Switzerland's largest health insurer"
  },
  {
    name: "Groupe Mutuel",
    logo: "https://res.cloudinary.com/dphbnwjtx/image/upload/v1740508835/gm-logo_fznr7i.png",
    link: "/healthcare/all-insurances/groupe-mutuel",
    description: "Comprehensive coverage options"
  },
  {
    name: "Helsana",
    logo: "https://res.cloudinary.com/dphbnwjtx/image/upload/v1740406933/helsana-old8485.logowik.com_xc1tcn.webp",
    link: "/healthcare/all-insurances/helsana",
    description: "Digital innovation leader"
  },
  {
    name: "Swica",
    logo: "https://res.cloudinary.com/dphbnwjtx/image/upload/v1740406933/swica_logo_yvxvxr.png",
    link: "/healthcare/all-insurances/swica",
    description: "Top-rated customer service"
  },
  {
    name: "Sanitas",
    logo: "https://res.cloudinary.com/dphbnwjtx/image/upload/v1740406933/sanitas_logo_yvxvxr.png",
    link: "/healthcare/all-insurances/sanitas",
    description: "Modern insurance solutions"
  }
];

const premiumRegions = [
  {
    name: "Major Cities",
    description: "Premium Region 1 (urban centers)",
    examples: "Zurich, Geneva, Basel",
    premiumRange: "CHF 350–550"
  },
  {
    name: "Suburban Areas",
    description: "Premium Region 2 (suburban belts)",
    examples: "City outskirts, larger towns",
    premiumRange: "CHF 300–450"
  },
  {
    name: "Rural Areas",
    description: "Premium Region 3 (rural/low-cost zones)",
    examples: "Countryside, small communities",
    premiumRange: "CHF 280–400"
  }
];

const faqs = [
  {
    question: "When do I need to get health insurance in Switzerland?",
    answer: "You must obtain health insurance within 3 months of arrival in Switzerland or registering with your local commune. Coverage is retroactive to your arrival date."
  },
  {
    question: "What documents do I need to apply for health insurance?",
    answer: "You'll need your residence permit (or application confirmation), passport, Swiss address, and bank details. Some insurers may require additional documentation."
  },
  {
    question: "How do I choose between different insurance models?",
    answer: "Consider factors like premium costs, preferred doctors, and flexibility needs. Standard models offer full choice but cost more, while restricted models (family doctor, telemedicine) offer savings."
  },
  {
    question: "Can insurers reject my application for basic insurance?",
    answer: "No, insurers must accept all applicants for basic insurance regardless of age, health status, or pre-existing conditions. This is mandated by Swiss law."
  },
  {
    question: "What happens if I miss the 3-month deadline?",
    answer: "Missing the deadline can result in being automatically assigned to an insurer by your canton, potentially with higher premiums. You may also face penalties."
  }
];
---

<Layout
  title="Health Insurance in Switzerland (2025): Models, Prices, and How to Save"
  description="Complete expat guide to Swiss health insurance: choose models (Standard, GP, HMO, Telmed), pick the right deductible, apply subsidies, compare providers (CSS, SWICA, Helsana, KPT), and switch at the right time. Free expert consultation."
>
  <!-- Breadcrumb JSON-LD -->
  <script type="application/ld+json" slot="head">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://expat-savvy.ch/"},
      {"@type": "ListItem", "position": 2, "name": "Health Insurance", "item": "https://expat-savvy.ch/health-insurance"}
    ]
  }
  </script>

  <!-- FAQ JSON-LD from page data -->
  <script type="application/ld+json" slot="head" set:html={JSON.stringify({
    '@context': 'https://schema.org',
    '@type': 'FAQPage',
    'mainEntity': (faqs || []).map((f) => ({
      '@type': 'Question',
      'name': f.question,
      'acceptedAnswer': { '@type': 'Answer', 'text': f.answer }
    }))
  })} />
  <!-- Hero Section (clean, no background image) -->
  <section class="bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">
      <div class="text-center">
        <h1 class="text-5xl md:text-7xl font-bold tracking-tight text-gray-900 mb-6">
          Health Insurance in <span class="text-primary-600">Switzerland</span>
        </h1>
        <p class="max-w-3xl mx-auto text-xl text-gray-600 mb-8">
          Everything expats need to know: find the best and cheapest options, understand what’s mandatory, and learn how to save money.
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
          <button
            onclick="showConsultationModal()"
            class="inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 transition-colors duration-300 shadow-lg hover:shadow-xl"
          >
            Get Expert Help
            <svg class="ml-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </button>
          <a
            href="#compare"
            class="inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-md text-primary-700 bg-white hover:bg-gray-50 transition-colors duration-300 shadow-lg hover:shadow-xl"
          >
            Compare Providers
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Value props / benefits -->
  <section class="bg-white py-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
          <div class="h-10 w-10 rounded-xl bg-primary-100 text-primary-700 flex items-center justify-center mb-4">
            <!-- Lucide Globe -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M2 12h20"></path><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10Z"></path></svg>
          </div>
          <h3 class="text-xl font-semibold text-gray-900">Expat-Focused Expertise</h3>
          <p class="mt-2 text-gray-600">We understand the unique challenges of navigating Swiss insurance as an international resident.</p>
        </div>
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
          <div class="h-10 w-10 rounded-xl bg-primary-100 text-primary-700 flex items-center justify-center mb-4">
            <!-- Lucide PiggyBank -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 7h-2.52a8 8 0 0 0-12.45 2H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h1v2a6 6 0 0 0 6 6h5a6 6 0 0 0 6-6v-4a2 2 0 0 0-2-2Z"></path><path d="M16 3h3v3"></path><path d="M16 11h.01"></path></svg>
          </div>
          <h3 class="text-xl font-semibold text-gray-900">Save Time and Money</h3>
          <p class="mt-2 text-gray-600">Access the best rates and avoid costly mistakes with our comprehensive market knowledge.</p>
        </div>
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
          <div class="h-10 w-10 rounded-xl bg-primary-100 text-primary-700 flex items-center justify-center mb-4">
            <!-- Lucide ShieldCheck -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10Z"></path><path d="m9 12 2 2 4-4"></path></svg>
          </div>
          <h3 class="text-xl font-semibold text-gray-900">Full Compliance Support</h3>
          <p class="mt-2 text-gray-600">Meet all legal requirements and deadlines with our step‑by‑step guidance.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- What is Swiss Health Insurance / Who must have -->
  <section class="bg-white py-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="sr-only">What is Swiss Health Insurance and Who Needs It?</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Left card -->
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
          <div class="flex items-center mb-4">
            <div class="h-10 w-10 rounded-xl bg-primary-100 text-primary-700 flex items-center justify-center mr-3">📄</div>
            <h3 class="text-2xl font-bold text-gray-900">What is Health Insurance in Switzerland?</h3>
          </div>
          <p class="text-gray-700 mb-4">Swiss health insurance consists of two main components:</p>
          <div class="space-y-6">
            <div class="bg-white rounded-xl border border-gray-200 p-4">
              <h4 class="text-lg font-semibold text-gray-900">Basic Health Insurance (KVG/LAMal)</h4>
              <p class="text-gray-700 mt-1">Mandatory coverage with identical legal benefits across all insurers. Premiums vary by canton, age, model, and deductible.</p>
              <div class="mt-3 text-sm bg-red-50 text-red-800 rounded-md p-3">Example: Doctor visits, hospital stays, prescribed medications, emergency care, and maternity services are covered.</div>
            </div>
            <div class="bg-white rounded-xl border border-gray-200 p-4">
              <h4 class="text-lg font-semibold text-gray-900">Supplementary Health Insurance (VVG)</h4>
              <p class="text-gray-700 mt-1">Optional private add‑ons for dental, alternative medicine, private rooms, and worldwide coverage.</p>
              <div class="mt-3 text-sm bg-red-50 text-red-800 rounded-md p-3">Example: Dental treatment, private hospital rooms, gym reimbursement, and extended cover abroad.</div>
            </div>
          </div>
        </div>
        <!-- Right card -->
        <div class="bg-red-50 rounded-2xl shadow-md p-6 border border-red-100">
          <div class="flex items-center mb-4">
            <div class="h-10 w-10 rounded-xl bg-white text-primary-700 flex items-center justify-center mr-3">👥</div>
            <h3 class="text-2xl font-bold text-gray-900">Who Must Have Health Insurance?</h3>
          </div>
          <ul class="space-y-3 text-gray-800">
            <li class="flex items-start"><span class="text-primary-600 mr-2">✔</span> All residents, regardless of nationality</li>
            <li class="flex items-start"><span class="text-primary-600 mr-2">✔</span> Expats with B, C, L, or G permits</li>
            <li class="flex items-start"><span class="text-primary-600 mr-2">✔</span> Students and au pairs staying over 3 months</li>
            <li class="flex items-start"><span class="text-primary-600 mr-2">✔</span> Newborns (insure within 3 months)</li>
            <li class="flex items-start"><span class="text-primary-600 mr-2">✔</span> Most cross‑border workers</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Critical timeline card -->
  <section class="bg-white py-4">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="rounded-2xl bg-red-600 text-white p-6 shadow-xl">
        <h3 class="text-2xl font-bold mb-3">Critical Timeline for New Residents</h3>
        <div class="bg-red-500/40 rounded-xl p-4">
          <div class="font-semibold mb-1">⚠️ 3‑Month Rule</div>
          <p>Obtain basic insurance within 3 months of arrival. Coverage and premiums are retroactive to your arrival date.</p>
          <div class="mt-3 bg-red-500/40 rounded-md p-3 text-sm">Example: Arrive in January, sign up in March → you still pay for January and February.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Costs heading -->
  <section class="bg-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-2">How Much Does Health Insurance Cost in Switzerland?</h2>
      <p class="text-center text-gray-600 max-w-3xl mx-auto">Premiums depend on canton and premium region, age, chosen model (Standard, GP, HMO, Telmed), and deductible (CHF 300–2’500). Use our comparison and request a tailored quote.</p>
    </div>
  </section>
  <!-- Insurance Models -->
  <div class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-extrabold text-center text-gray-900 mb-12">Insurance Models</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
        <a href="/guides/how-to/set-up-health-insurance" class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Set up health insurance</h3>
          <p class="text-gray-600">New arrivals: what to prepare, deadlines, and how to choose quickly.</p>
        </a>
        <a href="/guides/how-to/choose-health-insurance-deductible" class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Choose your deductible</h3>
          <p class="text-gray-600">Find your break-even and save with the right franchise.</p>
        </a>
        <a href="/guides/how-to/change-insurance-models" class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Choose a cheaper model</h3>
          <p class="text-gray-600">GP, HMO, or Telmed to reduce premiums without losing care.</p>
        </a>
        <a href="/guides/how-to/apply-premium-subsidies" class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Apply for premium subsidies</h3>
          <p class="text-gray-600">Check eligibility by canton and submit correctly.</p>
        </a>
        <a href="/guides/how-to/insurance-when-moving-cantons" class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Moving cantons</h3>
          <p class="text-gray-600">What changes, special rights, and tips to avoid surprises.</p>
        </a>
        <a href="/guides/how-to/change-health-insurance" class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
          <h3 class="text-xl font-semibold text-gray-900 mb-2">Switch provider</h3>
          <p class="text-gray-600">Deadlines, required letters, and a clean handover checklist.</p>
        </a>
      </div>
      <!-- Savings strategies -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-12">
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
          <h3 class="text-2xl font-bold text-gray-900 mb-2">How Can You Get Cheaper Health Insurance?</h3>
          <ul class="mt-2 space-y-3 text-gray-700">
            <li><span class="font-semibold">Choose the right deductible:</span> CHF 2’500 often lowers premiums the most if you rarely need care.</li>
            <li><span class="font-semibold">Select an alternative model:</span> GP/HMO/Telmed can reduce premiums by 10–25%.</li>
            <li><span class="font-semibold">Exclude accident coverage:</span> If employed >8h/week, you’re covered by UVG—remove the duplicate.</li>
            <li><span class="font-semibold">Compare and switch annually:</span> Review in November; switching is straightforward.</li>
          </ul>
          <div class="mt-4 text-sm text-primary-700 bg-primary-50 rounded-md p-3">Pro tip: Combine strategies (e.g., CHF 2’500 + HMO + no accident) for maximum savings.</div>
        </div>
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
          <h3 class="text-2xl font-bold text-gray-900 mb-2">Deep Dives</h3>
          <ul class="list-disc pl-5 space-y-2 text-primary-700">
            <li><a href="/guides/how-to/choose-health-insurance-deductible" class="hover:underline">How to choose your deductible</a></li>
            <li><a href="/guides/how-to/change-insurance-models" class="hover:underline">Compare insurance models (Standard vs GP vs HMO vs Telmed)</a></li>
            <li><a href="/healthcare/new-health-insurance" class="hover:underline">Set up health insurance (new arrivals)</a></li>
            <li><a href="/healthcare/switching-health-insurance" class="hover:underline">How to switch provider</a></li>
            <li><a href="/compare-providers" class="hover:underline">Compare providers</a></li>
          </ul>
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {insuranceModels.map(model => (
          <div class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
            <h3 class="text-xl font-semibold text-gray-900 mb-2">{model.name}</h3>
            <p class="text-gray-600 mb-4">{model.description}</p>
            <div class="inline-block px-3 py-1 mb-4 text-sm font-semibold text-primary-700 bg-primary-100 rounded-full">
              Premium Savings: {model.savings}
            </div>
            <h4 class="font-medium text-gray-900 mb-2">Best For:</h4>
            <ul class="space-y-2">
              {model.bestFor.map(item => (
                <li class="flex items-center text-sm text-gray-500">
                  <svg class="h-4 w-4 text-primary-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                  </svg>
                  {item}
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </div>

  <!-- Insurance Providers (icons, no logos) -->
  <div id="compare" class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-extrabold text-center text-gray-900 mb-12">Compare Top Swiss Health Insurers</h2>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
        {providers.map(p => (
          <a href={p.link} class="bg-white rounded-2xl shadow-md p-6 border border-gray-200 hover:border-primary-500 transition-colors">
            <div class="h-10 w-10 rounded-xl bg-primary-50 text-primary-700 flex items-center justify-center mx-auto mb-3">
              <!-- Lucide Building / Shield icon -->
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h18"></path><path d="M9 8h1"></path><path d="M9 12h1"></path><path d="M9 16h1"></path><path d="M14 8h1"></path><path d="M14 12h1"></path><path d="M14 16h1"></path><path d="M4 21V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v14"></path></svg>
            </div>
            <h3 class="text-center text-sm font-semibold text-gray-900">{p.name}</h3>
            <p class="mt-1 text-xs text-center text-gray-500">{p.description}</p>
          </a>
        ))}
      </div>
    </div>
  </div>

  <!-- Deductible & Cost Calculator -->
  <section class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-extrabold text-gray-900 text-center mb-6">Find Your Best Deductible</h2>
      <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">Estimate your yearly medical spending and compare total annual cost across deductibles. We include co‑payment (10% after deductible, max CHF 700).</p>

      <div id="deductible-calculator" class="bg-white rounded-2xl shadow-md border border-gray-200 p-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
          <!-- Controls -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Estimated yearly medical costs (CHF)</label>
            <input id="est-costs" type="number" min="0" step="50" value="600" class="w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500" />

            <label class="block text-sm font-medium text-gray-700 mt-6 mb-2">Choose a deductible</label>
            <input id="deductible-range" type="range" min="0" max="5" step="1" value="5" class="w-full" />
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>CHF 300</span><span>500</span><span>1’000</span><span>1’500</span><span>2’000</span><span>2’500</span>
            </div>
            <div class="mt-2 text-sm">Selected: <span id="deductible-current" class="font-semibold">CHF 2’500</span></div>
            <div class="mt-4 text-xs text-gray-600 bg-gray-50 border border-gray-200 rounded-md p-3">
              How it works: Total yearly cost = 12×monthly premium + your out‑of‑pocket (up to your deductible) + 10% co‑payment after deductible (max CHF 700).
            </div>
          </div>

          <!-- Results table -->
          <div class="lg:col-span-2">
            <div class="overflow-x-auto rounded-lg border border-gray-200">
              <table class="min-w-full divide-y divide-gray-200" id="results-table">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Deductible</th>
                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Est. Monthly Premium</th>
                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Total Yearly Cost</th>
                    <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Recommendation</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200" id="results-body"></tbody>
              </table>
            </div>
            <div id="recommendation" class="mt-4 text-sm text-gray-700"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Premium Regions -->
  <div class="bg-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="max-w-5xl mx-auto">
        <h2 class="text-3xl font-bold text-gray-900 mb-8">Understanding Premium Regions</h2>
        <div class="overflow-x-auto bg-white rounded-2xl shadow-md border border-gray-200">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Region</th>
                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Description</th>
                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Examples</th>
                <th class="px-4 py-3 text-left text-sm font-semibold text-gray-700">Typical Premiums</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
              {premiumRegions.map(r => (
                <tr>
                  <td class="px-4 py-3 text-sm text-gray-900">{r.name}</td>
                  <td class="px-4 py-3 text-sm text-gray-700">{r.description}</td>
                  <td class="px-4 py-3 text-sm text-gray-700">{r.examples}</td>
                  <td class="px-4 py-3 text-sm text-gray-900">{r.premiumRange}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
        <p class="mt-4 text-sm text-gray-500">Not all cantons use all three regions; some have 1–2 zones only.</p>
      </div>
    </div>
  </div>

  <!-- FAQ Section -->
  <div class="bg-gray-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">Frequently Asked Questions</h2>
      <div class="max-w-3xl mx-auto">
        <dl class="space-y-8">
          {faqs.map(faq => (
            <div class="bg-white rounded-lg shadow-md p-6">
              <dt class="text-lg font-semibold text-gray-900 mb-2">{faq.question}</dt>
              <dd class="text-gray-600">{faq.answer}</dd>
            </div>
          ))}
        </dl>
      </div>
    </div>
  </div>

  <!-- CTA Section -->
  <div class="bg-primary-600">
    <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h2 class="text-3xl font-extrabold text-white sm:text-4xl">
          Need help with your insurance?
        </h2>
        <p class="mt-4 text-xl text-primary-100">
          Get expert guidance to find the right coverage
        </p>
        <div class="mt-8">
          <button
            onclick="showConsultationModal()"
            class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-primary-600 bg-white hover:bg-primary-50 transition-colors duration-300"
          >
            Schedule Free Consultation
          </button>
        </div>
      </div>
    </div>
  </div>

  <ConsultationModal />
</Layout>

<script is:inline>
  // Simple deductible calculator with illustrative premiums
  const premiumByDeductible = {
    300: 520,
    500: 480,
    1000: 430,
    1500: 390,
    2000: 350,
    2500: 310
  };

  const deductibleSteps = [300,500,1000,1500,2000,2500];
  function selectedDeductible() {
    const el = document.getElementById('deductible-range');
    const idx = Number((el && (el as HTMLInputElement).value) || '5');
    return deductibleSteps[idx] || 2500;
  }
  function updateDeductibleLabel() {
    const label = document.getElementById('deductible-current');
    if (label) label.textContent = `CHF ${selectedDeductible().toLocaleString('de-CH')}`;
  }

  function coPay(amount) {
    return Math.min(Math.max(amount,0) * 0.10, 700);
  }

  function computeTotal(deductible, estCosts) {
    const monthly = premiumByDeductible[deductible] ?? 400;
    const annualPremium = monthly * 12;
    const outOfPocket = Math.min(estCosts, deductible) + coPay(estCosts - deductible);
    return { monthly, annualPremium, outOfPocket, total: annualPremium + outOfPocket };
  }

  function renderTable() {
    const est = Number((document.getElementById('est-costs') as HTMLInputElement).value) || 0;
    const tbody = document.getElementById('results-body');
    const rec = document.getElementById('recommendation');
    if (!tbody || !rec) return;
    tbody.innerHTML = '';
    let best = {ded: 0, total: Infinity};
    Object.keys(premiumByDeductible).map(Number).sort((a,b)=>a-b).forEach(d => {
      const r = computeTotal(d, est);
      if (r.total < best.total) best = {ded: d, total: r.total};
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td class="px-4 py-3 text-sm text-gray-900">CHF ${d}</td>
        <td class="px-4 py-3 text-sm text-gray-700">CHF ${r.monthly.toFixed(0)}/mo</td>
        <td class="px-4 py-3 text-sm text-gray-900">CHF ${r.total.toFixed(0)}/yr <span class="text-gray-500">(incl. out‑of‑pocket)</span></td>
        <td class="px-4 py-3 text-sm">${d === selectedDeductible() ? '<span class="text-primary-700 font-medium">Selected</span>' : ''}</td>
      `;
      tbody.appendChild(tr);
    });
    rec.innerHTML = `Best estimate: <span class="font-semibold">CHF ${best.ded}</span> for your inputs (total ~ CHF ${best.total.toFixed(0)}/yr). For an exact quote, click Get Expert Help.`;
  }

  document.addEventListener('DOMContentLoaded', () => {
    updateDeductibleLabel();
    const range = document.getElementById('deductible-range');
    if (range) range.addEventListener('input', () => { updateDeductibleLabel(); renderTable(); });
    const est = document.getElementById('est-costs');
    if (est) est.addEventListener('input', renderTable);
    renderTable();
  });
</script>